<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Factonix Technologies - Authentication</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --primary-blue: #1e6ba1;
            --primary-orange: #f5911f;
            --primary-gradient: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-orange) 100%);
            --login-gradient: linear-gradient(135deg, var(--primary-blue) 0%, var(--primary-orange) 70%);
            --error-red: #dc3545;
            --success-green: #28a745;
            --border-radius: 16px;
            --card-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
            --text-dark: #1a1a1a;
            --text-light: #ffffff;
            --input-bg: #f8f9fa;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body {
            width: 100%; height: 100%;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #e9ecef 0%, #ced4da 100%);
            overflow: hidden;
        }

        .auth-container {
            width: 100%;
            display: flex; align-items: center; justify-content: center; 
            height: 100vh;
        }

        .auth-card {
            width: 100%;
            background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(12px);
            border-radius: var(--border-radius); box-shadow: var(--card-shadow);
            display: flex;
            opacity: 0; transform: translateY(20px);
            animation: fadeInUp 0.8s ease forwards;
            height: 100vh;
            max-height: 100vh;
        }

        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

        .banner-section {
            flex: 1; background: var(--login-gradient); color: var(--text-light);
            padding: 2.5rem; height: 100vh;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }

        .banner-section::before {
            content: ''; position: absolute; top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .banner-content { position: relative; z-index: 2; text-align: center; max-width: 320px; }
        .banner-section h1 { font-weight: 700; font-size: 1.75rem; margin-bottom: 1rem; line-height: 1.3; }
        .banner-section p { font-size: 1rem; opacity: 0.9; line-height: 1.5; margin-bottom: 1.5rem; }
        .banner-icon { font-size: 2.5rem; margin-bottom: 1rem; opacity: 0.9; }
        .banner-features { list-style: none; padding: 0; margin: 0; font-size: 0.9rem; }
        .banner-features li { padding: 0.4rem 0; display: flex; align-items: center; justify-content: center; opacity: 0.85; }
        .banner-features i { margin-right: 0.5rem; width: 16px; color: var(--primary-orange); }

        .tabs-section { display: flex; background: white; border-bottom: 2px solid #e9ecef; margin-bottom: 0; }
        .tab-btn {
            flex: 1; padding: 1rem; border: none; background: transparent; color: #6c757d;
            font-weight: 600; font-size: 0.95rem; transition: all 0.3s ease;
            border-bottom: 3px solid transparent; display: flex; align-items: center;
            justify-content: center; gap: 0.5rem;
        }
        .tab-btn.active { color: var(--primary-blue); border-bottom-color: var(--primary-blue); background: #f8f9fa; }
        .tab-btn:hover { color: var(--primary-blue); background: #f8f9fa; }

        .form-section {
            flex: 1; padding: 2rem; background: white;
            position: relative; z-index: 999;
            display: flex; flex-direction: column; justify-content: flex-start;
        }

        .signup-only { display: none; }
        .login-only { display: block; }

        .form-section.login-active .signup-only { display: none !important; }
        .form-section.login-active .login-only { display: block !important; }
        .form-section.signup-active .signup-only { display: block !important; }
        .form-section.signup-active .login-only { display: none !important; }

        .form-floating { margin-bottom: 1rem; position: relative; }
        .form-control {
            border-radius: 8px; border: 1px solid #dee2e6;
            padding: 0.8rem 0.8rem 0.8rem 2.5rem; transition: all 0.3s ease;
            background: var(--input-bg); height: 46px; font-size: 0.9rem;
        }
        .form-floating>.form-control, .form-floating>.form-control-plaintext{
            padding: 1rem 2.75rem;
;
        }
        .form-control:focus {
            border-color: var(--primary-blue); box-shadow: 0 0 0 0.2rem rgba(37, 125, 187, 0.2);
            background: #fff; transform: scale(1.02);
        }
        .form-control.error {
            border-color: var(--error-red); box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.2);
            background: #fff5f5; animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .input-icon {
            position: absolute; left: 0.8rem; top: 50%; transform: translateY(-50%);
            color: #6c757d; z-index: 10; font-size: 0.9rem; cursor: pointer;
        }
        .input-icon.error { color: var(--error-red); }

        .field-error {
            color: var(--error-red); font-size: 0.8rem; margin-top: 0.2rem;
            display: none; font-weight: 500;
        }
        .field-error.show { display: block; }

        .btn-auth {
            background: var(--primary-gradient); border: none; border-radius: 8px;
            padding: 0.8rem; font-weight: 600; font-size: 0.9rem; width: 100%;
            transition: all 0.3s ease; color: var(--text-light); margin-top: 1rem; height: 48px;
        }
        .btn-auth:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 10px 20px rgba(37, 125, 187, 0.3);
        }

        .loading { display: none; }
        .loading.show { display: inline-block; }

        .error-message {
            background: #f8d7da; color: #721c24; padding: 0.6rem; border-radius: 6px;
            margin-bottom: 1rem; border-left: 3px solid var(--error-red);
            display: none; font-size: 0.85rem; text-align: center;
        }
        .error-message.show { display: block; }

        .password-strength { margin-top: 0.3rem; font-size: 0.8rem; font-weight: 500; }
        .strength-weak { color: var(--error-red); }
        .strength-medium { color: #ffc107; }
        .strength-strong { color: var(--success-green); }

        .form-check { margin-bottom: 1rem; font-size: 0.9rem; }
        .auth-link { color: var(--primary-blue); text-decoration: none; font-weight: 500; font-size: 0.9rem; }
        .auth-link:hover { color: var(--primary-orange); }
        .form-floating > label { left: 25px; }

        @media (max-width: 768px) {
            .auth-card { 
                flex-direction: column; 
                height: 100vh; 
                max-height: 100vh;
                border-radius: 0;
            }
            .banner-section { display: none !important; }
            .form-section { 
                padding: 1rem; 
                height: 100vh; 
                max-height: 100vh;
                justify-content: flex-start;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }
            .tabs-section { 
                border-radius: 0; 
                position: sticky; 
                top: 0; 
                z-index: 10;
                background: white;
            }
        }

        @media (max-width: 576px) {
            .form-section { padding: 0.75rem; }
            .form-control { height: 44px; font-size: 0.85rem; }
            .btn-auth { padding: 0.75rem; font-size: 0.85rem; }
            .tab-btn { padding: 0.75rem; font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <div class="auth-container">
        <div class="auth-card">
            <div class="banner-section">
                <div class="banner-content">
                    <div class="banner-icon"><i class="fas fa-sign-in-alt"></i></div>
                    <h1>Welcome Back</h1>
                    <p>Sign in to continue your learning journey</p>
                    <ul class="banner-features">
                        <li><i class="fas fa-check-circle"></i> 100+ premium courses</li>
                        <li><i class="fas fa-check-circle"></i> Track your progress</li>
                        <li><i class="fas fa-check-circle"></i> Earn certifications</li>
                        <li><i class="fas fa-check-circle"></i> Join our community</li>
                    </ul>
                </div>
            </div>

            <div class="form-section login-active">
                <div class="tabs-section">
                    <button class="tab-btn active" id="loginTab"><i class="fas fa-sign-in-alt"></i> Login</button>
                    <button class="tab-btn" id="signupTab"><i class="fas fa-user-plus"></i> Create Account</button>
                </div>

                <div id="formError" class="error-message"></div>
                <form id="authForm" novalidate>
                    <div class="form-floating signup-only">
                        <i class="fas fa-user input-icon" id="firstNameIcon"></i>
                        <input type="text" class="form-control" id="firstName" placeholder="Full Name">
                        <label for="firstName">Full Name</label>
                        <div class="field-error" id="firstNameError">Name required.</div>
                    </div>

                    <div class="form-floating">
                        <i class="fas fa-envelope input-icon" id="emailIcon"></i>
                        <input type="email" class="form-control" id="email" placeholder="Email" required>
                        <label for="email">Email Address</label>
                        <div class="field-error" id="emailError">Valid email required.</div>
                    </div>

                    <div class="form-floating signup-only">
                        <i class="fas fa-phone input-icon" id="mobileIcon"></i>
                        <input type="tel" class="form-control" id="mobile" placeholder="Mobile Number">
                        <label for="mobile">Mobile Number</label>
                        <div class="field-error" id="mobileError">Valid mobile number required.</div>
                    </div>

                    <div class="form-floating">
                        <i class="fas fa-lock input-icon" id="passwordIcon"></i>
                        <input type="password" class="form-control" id="password" placeholder="Password" required>
                        <label for="password">Password</label>
                        <div class="password-strength" id="passwordStrength"></div>
                        <div class="field-error" id="passwordError">Password must be 6+ chars.</div>
                    </div>

                    <div class="form-floating signup-only">
                        <i class="fas fa-lock input-icon" id="confirmPasswordIcon"></i>
                        <input type="password" class="form-control" id="confirmPassword" placeholder="Confirm">
                        <label for="confirmPassword">Confirm Password</label>
                        <div class="field-error" id="confirmPasswordError">Passwords don't match.</div>
                    </div>

                    <div class="form-check signup-only">
                        <input class="form-check-input" type="checkbox" id="terms">
                        <label class="form-check-label" for="terms">
                            Agree to <a href="#" class="auth-link" data-bs-toggle="modal" data-bs-target="#termsModal">Terms</a> & 
                            <a href="#" class="auth-link" data-bs-toggle="modal" data-bs-target="#privacyModal">Privacy</a>
                        </label>
                        <div class="field-error" id="termsError">Must agree to terms.</div>
                    </div>

                    <div class="form-check login-only">
                        <input class="form-check-input" type="checkbox" id="rememberMe">
                        <label class="form-check-label" for="rememberMe">Keep me signed in</label>
                    </div>

                    <button type="submit" class="btn btn-auth" id="submitBtn">
                        <span class="loading spinner-border spinner-border-sm me-2" role="status"></span>
                        <span id="btnText">Sign In</span>
                    </button>

                    <div class="text-center mt-3 login-only">
                        <a href="#" class="auth-link" data-bs-toggle="modal" data-bs-target="#forgotModal">Forgot Password?</a>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="modal fade" id="forgotModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title"><i class="fas fa-key me-2"></i>Reset Password</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="forgotForm">
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                            <input type="email" class="form-control" placeholder="Enter your email" required>
                        </div>
                        <button type="submit" class="btn btn-primary mt-3 w-100">Send Reset Link</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="termsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title"><i class="fas fa-file-contract me-2"></i>Terms of Service</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">Terms content...</div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="privacyModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title"><i class="fas fa-shield-alt me-2"></i>Privacy Policy</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">Privacy content...</div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        let currentForm = 'login';

        function switchToLogin() {
            if (currentForm === 'login') return;
            currentForm = 'login';
            document.getElementById('loginTab').classList.add('active');
            document.getElementById('signupTab').classList.remove('active');
            
            const formSection = document.querySelector('.form-section');
            formSection.classList.remove('signup-active');
            formSection.classList.add('login-active');
            
            if (window.innerWidth > 768) {
                document.querySelector('.banner-content').innerHTML = `
                    <div class="banner-icon"><i class="fas fa-sign-in-alt"></i></div>
                    <h1>Welcome Back</h1>
                    <p>Sign in to continue your learning journey</p>
                    <ul class="banner-features">
                        <li><i class="fas fa-check-circle"></i> 100+ premium courses</li>
                        <li><i class="fas fa-check-circle"></i> Track your progress</li>
                        <li><i class="fas fa-check-circle"></i> Earn certifications</li>
                        <li><i class="fas fa-check-circle"></i> Join our community</li>
                    </ul>
                `;
            }
            
            document.getElementById('email').focus();
            document.getElementById('btnText').textContent = 'Sign In';
        }

        function switchToSignup() {
            if (currentForm === 'signup') return;
            currentForm = 'signup';
            document.getElementById('loginTab').classList.remove('active');
            document.getElementById('signupTab').classList.add('active');
            
            const formSection = document.querySelector('.form-section');
            formSection.classList.remove('login-active');
            formSection.classList.add('signup-active');
            
            if (window.innerWidth > 768) {
                document.querySelector('.banner-content').innerHTML = `
                    <div class="banner-icon"><i class="fas fa-user-plus"></i></div>
                    <h1>Join Factonix</h1>
                    <p>Start your learning journey today</p>
                    <ul class="banner-features">
                        <li><i class="fas fa-check-circle"></i> Expert-led courses</li>
                        <li><i class="fas fa-check-circle"></i> Earn certificates</li>
                        <li><i class="fas fa-check-circle"></i> 24/7 support</li>
                        <li><i class="fas fa-check-circle"></i> Join our community</li>
                    </ul>
                `;
            }
            
            setTimeout(() => document.getElementById('firstName').focus(), 150);
            document.getElementById('btnText').textContent = 'Create Account';
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('loginTab').addEventListener('click', switchToLogin);
            document.getElementById('signupTab').addEventListener('click', switchToSignup);

            ['passwordIcon', 'confirmPasswordIcon'].forEach(iconId => {
                const icon = document.getElementById(iconId);
                if (icon) {
                    icon.addEventListener('click', function() {
                        const fieldId = iconId.replace('Icon', '');
                        const field = document.getElementById(fieldId);
                        const type = field.type === 'password' ? 'text' : 'password';
                        field.type = type;
                        icon.className = `input-icon ${type === 'password' ? 'fas fa-lock' : 'fas fa-eye'}`;
                    });
                }
            });

            document.getElementById('password').addEventListener('input', function() {
                const password = this.value;
                const strengthDiv = document.getElementById('passwordStrength');
                if (!password) { strengthDiv.textContent = ''; return; }
                
                let strength = 'weak', message = '';
                if (password.length >= 8 && /[A-Z]/.test(password) && /\d/.test(password)) {
                    strength = 'strong'; message = 'Strong password ✓';
                } else if (password.length >= 6) {
                    strength = 'medium'; message = 'Medium - add uppercase & numbers';
                } else {
                    message = 'Weak - use 6+ characters';
                }
                strengthDiv.textContent = message;
                strengthDiv.className = `password-strength strength-${strength}`;
            });

            document.getElementById('email').focus();
        });

        function validateEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function validateMobile(mobile) {
            return /^[\+]?[1-9][0-9]{9,15}$/.test(mobile.replace(/\s/g, ''));
        }

        function showFieldError(fieldId, iconId, errorId, message) {
            const field = document.getElementById(fieldId);
            const icon = document.getElementById(iconId);
            const errorDiv = document.getElementById(errorId);
            field.classList.add('error');
            if (icon) icon.classList.add('error');
            errorDiv.textContent = message;
            errorDiv.classList.add('show');
        }

        function clearFieldError(fieldId, iconId, errorId) {
            const field = document.getElementById(fieldId);
            const icon = document.getElementById(iconId);
            const errorDiv = document.getElementById(errorId);
            field.classList.remove('error');
            if (icon) icon.classList.remove('error');
            errorDiv.classList.remove('show');
        }

        function showMessage(message) {
            const errorDiv = document.getElementById('formError');
            errorDiv.classList.add('show');
            errorDiv.textContent = message;
            setTimeout(() => errorDiv.classList.remove('show'), 5000);
        }

        document.getElementById('authForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const btn = document.getElementById('submitBtn');
            const spinner = btn.querySelector('.loading');
            const btnText = document.getElementById('btnText');

            ['email', 'password', 'firstName', 'confirmPassword', 'mobile'].forEach(id => {
                clearFieldError(id, `${id}Icon`, `${id}Error`);
            });
            document.getElementById('termsError')?.classList.remove('show');

            let isValid = true;

            if (!email || !validateEmail(email)) {
                showFieldError('email', 'emailIcon', 'emailError', 
                    !email ? 'Email required' : 'Invalid email format');
                isValid = false;
            }
            if (!password || password.length < 6) {
                showFieldError('password', 'passwordIcon', 'passwordError', 
                    !password ? 'Password required' : 'Password must be 6+ chars');
                isValid = false;
            }

            if (currentForm === 'login') {
                if (!isValid) return;

                btn.classList.add('loading');
                spinner.classList.add('show');
                btnText.textContent = 'Signing In...';

                setTimeout(() => {
                    const users = JSON.parse(localStorage.getItem('users')) || [];
                    const user = users.find(u => u.email === email.toLowerCase() && u.password === password);
                    if (user) {
                        localStorage.setItem('authToken', btoa(`${email}:${Date.now()}`));
                        localStorage.setItem('userData', JSON.stringify(user));
                        showMessage('Login successful! Redirecting...');
                        setTimeout(() => window.location.href = 'index.html', 1500);
                    } else {
                        showMessage('Invalid credentials');
                    }
                    spinner.classList.remove('show');
                    btn.classList.remove('loading');
                    btnText.textContent = 'Sign In';
                }, 2000);

            } else {
                const firstName = document.getElementById('firstName').value.trim();
                const confirmPassword = document.getElementById('confirmPassword').value;
                const mobile = document.getElementById('mobile').value.trim();
                const terms = document.getElementById('terms').checked;

                if (!firstName) { showFieldError('firstName', 'firstNameIcon', 'firstNameError', 'Name required'); isValid = false; }
                if (!mobile || !validateMobile(mobile)) { 
                    showFieldError('mobile', 'mobileIcon', 'mobileError', 
                        !mobile ? 'Mobile number required' : 'Valid mobile number required'); 
                    isValid = false; 
                }
                if (password !== confirmPassword) { showFieldError('confirmPassword', 'confirmPasswordIcon', 'confirmPasswordError', 'Passwords dont match'); isValid = false; }
                if (!terms) { document.getElementById('termsError').classList.add('show'); isValid = false; }

                if (!isValid) return;

                btn.classList.add('loading');
                spinner.classList.add('show');
                btnText.textContent = 'Creating Account...';

                setTimeout(() => {
                    let users = JSON.parse(localStorage.getItem('users')) || [];
                    if (users.find(u => u.email === email.toLowerCase())) {
                        showMessage('Email already registered');
                        spinner.classList.remove('show');
                        btn.classList.remove('loading');
                        btnText.textContent = 'Create Account';
                        return;
                    }
                    if (users.find(u => u.mobile === mobile)) {
                        showMessage('Mobile number already registered');
                        spinner.classList.remove('show');
                        btn.classList.remove('loading');
                        btnText.textContent = 'Create Account';
                        return;
                    }

                    const avatarUrl = `https://ui-avatars.com/api/?name=${firstName}&background=1e6ba1&color=fff`;

                    const newUser = {
                        id: Date.now(),
                        firstName, 
                        email: email.toLowerCase(),
                        mobile, 
                        password,
                        role: 'student',
                        createdAt: new Date().toISOString(),
                        avatar: avatarUrl,
                        courses: [], 
                        progress: {}, 
                        isActive: true
                    };

                    users.push(newUser);
                    localStorage.setItem('users', JSON.stringify(users));
                    localStorage.setItem('authToken', btoa(`${email}:${Date.now()}`));
                    localStorage.setItem('userData', JSON.stringify(newUser));
                    showMessage('Account created! Redirecting...');
                    setTimeout(() => window.location.href = 'index.html', 1500);
                }, 2000);
            }
        });

        document.getElementById('forgotForm')?.addEventListener('submit', function(e) {
            e.preventDefault();
            showMessage('Password reset link sent!');
            bootstrap.Modal.getInstance(document.getElementById('forgotModal')).hide();
        });

        if (localStorage.getItem('authToken')) {
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>